<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>TillBlack — Studio</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%230b0b0f'/%3E%3Cpath d='M7 9h8v4H7zm0 6h18v4H7zm0 6h12v4H7z' fill='%23ffffff'/%3E%3C/svg%3E" />
    <meta name="description" content="TillBlack is a small studio crafting moody, atmospheric experiences — including Code of Shadows." />

    <meta property="og:title" content="TillBlack — Studio" />
    <meta property="og:description" content="Atmospheric games & visuals. Code of Shadows by TillBlack." />
    <meta property="og:type" content="website" />

    <style>
      :root{
        --fg: #ffffff;
        --fg-dim:#cfcfcf;
        --bg: #0b0b0f;
      }

      html,body{min-height:100svh; margin:0; overflow-x:hidden;}
      body{
        background:var(--bg);
        color:var(--fg);
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
        line-height:1.5;
      }

      #bg{position:fixed; inset:0; z-index:0;}

      .wrap{
        position:relative;
        min-height:100svh;
        display:flex;
        flex-direction:column;
        justify-content:flex-start;
        align-items:center;
        padding:6vh 1rem 6rem; /* bottom padding for footer space */
        box-sizing:border-box;
      }

      .card{ width:100%; max-width:1000px; text-align:center; display:flex; flex-direction:column; gap:1.2rem; }

      .brand{display:grid; place-items:center; margin-top:1rem}
      .brand .logo{ 
        display:block; 
        width:clamp(100px, 20vw, 160px);
        height:auto; margin:0 auto; 
        filter: drop-shadow(0 0 10px rgba(255,255,255,.12));
        mix-blend-mode:difference;
      }

      .blend, .blend *{ mix-blend-mode:difference; color:white; }

      .title{font-size: clamp(24px,5.5vw,42px); font-weight:800; margin:0 0 .5rem}
      .sub{max-width:52ch; margin:0 auto .8rem; font-size:clamp(13px,3.5vw,15px)}

      .cta{display:flex; gap:0.5rem; justify-content:center; flex-direction:column; margin-top:0.6rem}
      .btn{ 
        padding:0.6rem 0.9rem;
        border-radius:0.6rem;
        border:1px solid rgba(255,255,255,.18);
        background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
        color:white; text-decoration:none; font-weight:600;
        font-size:14px;
        transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
        mix-blend-mode:difference;
        width:100%;
        max-width:320px;
        align-self:center;
      }
      .btn:hover{ transform: translateY(-2px); border-color: rgba(255,255,255,.32); box-shadow:0 0 20px rgba(255,255,255,.15)}

      .steam-widget{margin-top:0.8rem; display:flex; justify-content:center; padding:0 0.5rem}
      .steam-widget iframe{ width:100%; max-width:100%; height:120px; border-radius:0.5rem; }

      footer{position:fixed; bottom:0; left:0; right:0; text-align:center; padding:0.4rem; font-size:11px; mix-blend-mode:difference; color:white; background:transparent; z-index:10;}

      @supports (padding: env(safe-area-inset-top)){
        body{ padding-bottom: env(safe-area-inset-bottom); }
      }
    </style>
  </head>
  <body>
    <canvas id="bg" aria-hidden="true"></canvas>

    <main class="wrap">
      <section class="card">
        <div class="blend">
          <h1 class="title">Build. Create. TillBlack.</h1>
          <p id="main-text" class="sub">TillBlack is a studio blending art and technology to craft moody, timeless experiences. Our current title is <strong>Code of Shadows</strong>.</p>
          <div class="cta">
            <a class="btn" href="https://store.steampowered.com/app/3424800/Code_of_Shadows/">→ View on Steam</a>
            <a class="btn" href="mailto:hello@tillblack.com">Contact</a>
            <a class="btn" href="#about" onclick="showAbout(event)">About</a>
          </div>
        </div>
        <div class="steam-widget">
          <iframe src="https://store.steampowered.com/widget/3424800/" frameborder="0"></iframe>
        </div>
        <div class="brand">
          <img class="logo" src="assets/TillBlack_Logo_black.png" alt="TillBlack logo black" />
        </div>
      </section>
    </main>

    <footer><span class="blend">© <span id="year"></span> TillBlack. All rights reserved.</span></footer>

    <script type="module">
      import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';
      document.getElementById('year').textContent = new Date().getFullYear();
      const canvas = document.getElementById('bg');
      let renderer, scene, camera, uniforms, mesh;
      function init(){
        renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:false });
        renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
        scene = new THREE.Scene();
        camera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
        const vertex = `varying vec2 vUv; void main(){ vUv = uv; gl_Position = vec4(position,1.0); }`;
        const fragment = `precision highp float; varying vec2 vUv; uniform float uTime; uniform vec2 uResolution; vec2 hash(vec2 p){ p = vec2(dot(p, vec2(127.1,311.7)), dot(p, vec2(269.5,183.3))); return -1.0 + 2.0*fract(sin(p)*43758.5453123);} float noise(in vec2 p){ const float K1 = 0.366025404; const float K2 = 0.211324865; vec2 i = floor(p + (p.x+p.y)*K1); vec2 a = p - i + (i.x+i.y)*K2; vec2 o = (a.x>a.y) ? vec2(1.0,0.0) : vec2(0.0,1.0); vec2 b = a - o + K2; vec2 c = a - 1.0 + 2.0*K2; vec3 h = max(0.5 - vec3(dot(a,a), dot(b,b), dot(c,c)), 0.0); vec3 n = h*h*h*h*vec3( dot(a, hash(i + 0.0)), dot(b, hash(i + o)), dot(c, hash(i + 1.0)) ); return dot(n, vec3(70.0)); } void main(){ vec2 uv = vUv; vec2 p = (uv - 0.5) * vec2(uResolution.x/uResolution.y, 1.0); float t = uTime*0.062; float n1 = noise(p*1.8 + vec2(t*0.7, -t*0.5)); float n2 = noise(p*3.2 - vec2(t*0.4,  t*0.6)); float f  = clamp((n1 + 0.6*n2), 0.0, 1.0); vec3 black  = vec3(0.0, 0.0, 0.0); vec3 blue   = vec3(0.1, 0.1, 0.3); vec3 purple = vec3(0.01, 0.02, 0.01); vec3 col; if(f < 0.5){ col = mix(black, blue, smoothstep(0.0, 0.5, f)); } else { col = mix(blue,  purple, smoothstep(0.5, 1.0, f)); } float vign = smoothstep(0.96, 0.15, length(uv-0.5)); col *= vign; gl_FragColor = vec4(col, 1.0); }`;
        uniforms = { uTime: { value: 0 }, uResolution: { value: new THREE.Vector2() } };
        const geo = new THREE.PlaneGeometry(2,2);
        const mat = new THREE.ShaderMaterial({ uniforms, vertexShader: vertex, fragmentShader: fragment, depthTest:false, depthWrite:false, transparent:false });
        mesh = new THREE.Mesh(geo, mat);
        scene.add(mesh);
        onResize();
        window.addEventListener('resize', onResize);
        animate();
      }
      function onResize(){ const w = innerWidth, h = innerHeight; renderer.setSize(w, h, false); uniforms.uResolution.value.set(w, h); }
      function animate(t){ uniforms.uTime.value = (t||0)*0.001; renderer.render(scene, camera); requestAnimationFrame(animate); }
      try{ init(); } catch(e){ canvas.style.display='none'; console.warn('WebGL disabled:', e); }
      window.showAbout = function(e){ e.preventDefault(); const mainText = document.getElementById('main-text'); if(mainText.dataset.alt === 'true'){ mainText.innerHTML = 'TillBlack is a studio blending art and technology to craft moody, timeless experiences. Our current title is <strong>Code of Shadows</strong>.'; mainText.dataset.alt = 'false'; } else { mainText.innerHTML = 'Founded as a branch of DECOL, TillBlack aims to merge digital art and game design into unique, atmospheric projects that resonate beyond the screen.'; mainText.dataset.alt = 'true'; } }
    </script>
  </body>
</html>
